From 432ba948d78360465ed28deb79bb50b4433a0d4d Mon Sep 17 00:00:00 2001
From: Peter O'Connor <peter@solus-project.com>
Date: Mon, 24 Jul 2017 20:08:25 +1000
Subject: [PATCH] Use explicit path of the gtk-module

Despite it working just about everywhere else (including installing it in the
right place), it seems to break here.

Signed-off-by: Peter O'Connor <peter@solus-project.com>
---
 gtk3proxies/preview3.c | 2 +-
 gtkproxies/preview.c   | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/gtk3proxies/preview3.c b/gtk3proxies/preview3.c
index f5b10d0..b1cdabc 100644
--- a/gtk3proxies/preview3.c
+++ b/gtk3proxies/preview3.c
@@ -68,7 +68,7 @@ int main(int argc, char **argv)
             sscanf(argv[1], "%ld", &wid);
     }
     
-    const char* ui_file = DATA_DIR "/preview.ui";
+    const char* ui_file = "/usr/share/kcm-gtk-module/preview.ui";
  
     GtkBuilder *builder = gtk_builder_new();
     if( ! gtk_builder_add_from_file( builder, ui_file, &error ) ) {
diff --git a/gtkproxies/preview.c b/gtkproxies/preview.c
index 5b40a44..b10396f 100644
--- a/gtkproxies/preview.c
+++ b/gtkproxies/preview.c
@@ -81,7 +81,7 @@ int main(int argc, char **argv)
         } else if(argc>1)
             sscanf(argv[1], "%ld", &wid);
     }
-    const char* ui_file = DATA_DIR "/preview.ui";
+    const char* ui_file = "/usr/share/kcm-gtk-module/preview.ui";
  
     GtkBuilder *builder = gtk_builder_new();
     if( ! gtk_builder_add_from_file( builder, ui_file, &error ) ) {
-- 
2.13.3

